<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Curso Programaci√≥n</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<style>
body{
margin:0;
font-family:Arial;
background:#0b0014;
color:white;
text-align:center
}
button{
background:#7b2cff;
border:none;
padding:12px 20px;
border-radius:8px;
color:white;
cursor:pointer;
margin:6px
}
.card{
background:#150022;
padding:20px;
margin:20px auto;
max-width:500px;
border-radius:15px
}
.hidden{display:none}
</style>
</head>

<body>

<h1>üöÄ Curso Programaci√≥n</h1>

<div id="loginDiv" class="card">
<h2>Inicia sesi√≥n</h2>
<button onclick="login()">Google</button>
</div>

<div id="menu" class="hidden card">
<h2 id="user"></h2>
<h3>Curso</h3>
<button onclick="selectCourse('python')">Python</button>
<button onclick="selectCourse('js')">JavaScript</button>
<button onclick="selectCourse('html')">HTML</button>
<button onclick="selectCourse('mysql')">MySQL</button>
</div>

<div id="levels" class="hidden card">
<h3>Nivel</h3>
<button onclick="startQuiz('facil')">F√°cil</button>
<button onclick="startQuiz('medio')">Medio</button>
<button onclick="startQuiz('dificil')">Dif√≠cil</button>
<button onclick="startQuiz('extremo')">Extremo</button>
</div>

<div id="quiz" class="hidden card">
<h3 id="q"></h3>
<div id="opts"></div>
</div>

<div id="result" class="hidden card"></div>

<script>
const firebaseConfig = {
apiKey: "AIzaSyBSZUyulUeJhdc6vl-SsyZtEoThEMNhBU",
authDomain: "curso-programacion-d1921.firebaseapp.com",
projectId: "curso-programacion-d1921",
storageBucket: "curso-programacion-d1921.appspot.com",
messagingSenderId: "40569665582",
appId: "1:40569665582:web:0b09a2d0ce88737cdc87bf",
measurementId: "G-54T0S7CPBB"
};

firebase.initializeApp(firebaseConfig);
const auth=firebase.auth();

let curso,nivel,preguntas=[],i=0,puntos=0;

const banco=[
{l:"python",n:"facil",q:"¬øQu√© imprime print(2+2)?",o:["4","22","Error"],r:0,p:5},
{l:"python",n:"medio",q:"x=[1,2];print(len(x))",o:["1","2","Error"],r:1,p:5},
{l:"js",n:"facil",q:"typeof 5 devuelve:",o:["number","string","int"],r:0,p:5},
{l:"html",n:"facil",q:"Etiqueta principal:",o:["<body>","<head>","<main>"],r:0,p:5},
{l:"mysql",n:"facil",q:"SELECT sirve para:",o:["Insertar","Leer","Borrar"],r:1,p:5},

{l:"python",n:"dificil",q:"print([i for i in range(3)])",o:["0,1,2","[0,1,2]","error"],r:1,p:10},
{l:"js",n:"medio",q:"let x=[]; console.log(x==true)",o:["true","false"],r:1,p:8},
{l:"html",n:"medio",q:"display:flex pertenece a:",o:["HTML","CSS","JS"],r:1,p:8},
{l:"mysql",n:"medio",q:"PRIMARY KEY:",o:["duplica","identifica","borra"],r:1,p:8},
];

function login(){
auth.signInWithPopup(new firebase.auth.GoogleAuthProvider()).then(r=>{
loginDiv.classList.add("hidden");
menu.classList.remove("hidden");
user.innerText=r.user.displayName;
});
}

function selectCourse(c){
curso=c;
menu.classList.add("hidden");
levels.classList.remove("hidden");
}

function startQuiz(n){
nivel=n;
levels.classList.add("hidden");
quiz.classList.remove("hidden");

preguntas=banco.filter(p=>p.l==curso&&p.n==nivel)
.sort(()=>Math.random()-0.5);

i=0;puntos=0;
show();
}

function show(){
if(i>=preguntas.length){finish();return;}
q.innerText=preguntas[i].q;
opts.innerHTML="";
preguntas[i].o.forEach((op,j)=>{
let b=document.createElement("button");
b.innerText=op;
b.onclick=()=>answer(j);
opts.appendChild(b);
});
}

function answer(j){
if(j==preguntas[i].r)puntos+=preguntas[i].p;
i++;show();
}

function finish(){
quiz.classList.add("hidden");
result.classList.remove("hidden");

let aprobado=puntos>=70;

result.innerHTML=`
<h2>Puntaje: ${puntos}</h2>
<h3>${aprobado?"APROBADO üéâ":"REPROBADO ‚ùå"}</h3>
<button onclick='location.reload()'>Volver</button>
`;

let hist=JSON.parse(localStorage.getItem("hist")||"[]");
hist.push({curso,nivel,puntos,fecha:new Date().toLocaleDateString()});
localStorage.setItem("hist",JSON.stringify(hist));
}
</script>

</body>
</html>
