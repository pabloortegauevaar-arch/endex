<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Curso Programaci√≥n</title>

<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>

<style>
body{
margin:0;
font-family:Arial;
background:#0c0016;
color:white;
}

h1{text-align:center}

#login,#courses,#levels,#quiz,#result{
display:none;
padding:30px;
min-height:100vh;
}

.grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
gap:25px;
}

.card{
background:#1b002b;
border-radius:15px;
padding:20px;
text-align:center;
cursor:pointer;
}

.card img{
width:80px;
margin-bottom:10px;
}

button{
padding:10px 20px;
background:#7b2cff;
border:none;
border-radius:10px;
color:white;
margin-top:15px;
cursor:pointer;
}

#opts button{display:block;width:100%;margin:10px 0}

.center{text-align:center}
</style>
</head>

<body>

<div id="login" class="center">
<h1>Iniciar sesi√≥n</h1>
<button onclick="login()">Google</button>
</div>

<div id="courses">
<h1>Elige tu curso</h1>
<div class="grid">
<div class="card" onclick="pick('python')"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/python/python-original.svg"><h3>Python</h3></div>
<div class="card" onclick="pick('js')"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/javascript/javascript-original.svg"><h3>JavaScript</h3></div>
<div class="card" onclick="pick('html')"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/html5/html5-original.svg"><h3>HTML</h3></div>
<div class="card" onclick="pick('mysql')"><img src="https://cdn.jsdelivr.net/gh/devicons/devicon/icons/mysql/mysql-original.svg"><h3>MySQL</h3></div>
</div>
</div>

<div id="levels" class="center">
<h1>Nivel</h1>
<button onclick="start('facil')">F√°cil</button>
<button onclick="start('medio')">Medio</button>
<button onclick="start('dificil')">Dif√≠cil</button>
</div>

<div id="quiz">
<h2 id="question"></h2>
<div id="opts"></div>
<button onclick="next()">Siguiente</button>
</div>

<div id="result" class="center"></div>

<script>
firebase.initializeApp({
apiKey:"AIzaSyBSZUyaUlEjhdc6vl-SsyZtEotOhFMNhBU",
authDomain:"curso-programacion-d1921.firebaseapp.com",
projectId:"curso-programacion-d1921"
});

const auth=firebase.auth();

auth.onAuthStateChanged(u=>{
if(u){
courses.style.display="block";
}else login.style.display="block";
});

function login(){
auth.signInWithPopup(new firebase.auth.GoogleAuthProvider());
}

let curso,nivel,i=0,score=0,qs=[];

const bank=[];
["python","js","html","mysql"].forEach(l=>{
["facil","medio","dificil"].forEach(n=>{
for(let x=0;x<10;x++){
bank.push({
l,n,
q:${l.toUpperCase()} ${n} pregunta ${x+1},
o:["A","B","C","D"],
r:Math.floor(Math.random()*4),
p:10
});
}
});
});

function pick(c){
curso=c;
courses.style.display="none";
levels.style.display="block";
}

function start(n){
nivel=n;
levels.style.display="none";
quiz.style.display="block";

qs=bank.filter(x=>x.l==curso&&x.n==nivel).sort(()=>Math.random()-0.5);

i=0;score=0;
show();
}

function show(){
question.innerText=qs[i].q;
opts.innerHTML="";
qs[i].o.forEach((t,j)=>{
let b=document.createElement("button");
b.innerText=t;
b.onclick=()=>{ if(j==qs[i].r)score+=qs[i].p; };
opts.appendChild(b);
});
}

function next(){
i++;
if(i>=qs.length)finish();
else show();
}

function finish(){
quiz.style.display="none";
result.style.display="block";
let ok=score>=70;

result.innerHTML=`
<h1>${ok?"APROBADO üéâ":"REPROBADO ‚ùå"}</h1>
<h2>${score} puntos</h2>
<button onclick="location.reload()">Volver</button>
`;
}
</script>

</body>
</html>
